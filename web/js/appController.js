define(["ojs/ojcore","knockout","ojs/ojmodule-element-utils","config/appconfig","ojs/ojmodule-element","ojs/ojrouter","ojs/ojknockout","ojs/ojarraytabledatasource","ojs/ojoffcanvas"],function(e,o,r,a){return new function(){var l=this;l.userid=new o.observable,l.logg=new o.observable;var t=a.get("rewardsEnabled");l.logg(!1),console.log("try to setup login in appController: "+l.logg());var n=e.ResponsiveUtils.getFrameworkQuery(e.ResponsiveUtils.FRAMEWORK_QUERY_KEY.SM_ONLY);l.smScreen=e.ResponsiveKnockoutUtils.createMediaQueryObservable(n);var s=e.ResponsiveUtils.getFrameworkQuery(e.ResponsiveUtils.FRAMEWORK_QUERY_KEY.MD_UP);l.mdScreen=e.ResponsiveKnockoutUtils.createMediaQueryObservable(s),l.router=e.Router.rootInstance,l.router.configure({welcome:{label:"Cafe Supremo",isDefault:!0},discover:{label:"DISCOVER COFFEE"},store:{label:"STORES"},reward:{label:"REWARDS"},unavailable:{label:"UNAVAILABLE"},logout:{label:"LOGOUT"}}),e.Router.defaults.urlAdapter=new e.Router.urlParamAdapter,l.moduleConfig=o.observable({view:[],viewModel:null}),l.loadModule=function(){o.computed(function(){var e=l.router.moduleConfig.name(),o="views/"+e+".html",a="viewModels/"+e;Promise.all([r.createView({viewPath:o}),r.createViewModel({viewModelPath:a})]).then(function(e){l.moduleConfig({view:e[0],viewModel:e[1]})})})},console.log("disabled: "+!t),l.navDataSourceX=new o.observableArray([{name:"Welcome",id:"welcome",disabled:!1},{name:"Discover",id:"discover",disabled:!1},{name:"Stores",id:"store",disabled:!1},{name:"Rewards",id:"reward",disabled:""+!(t&&l.logg())},{name:"Logout",id:"logout",disabled:""+!l.logg()}]),l.navDataSource=new e.ArrayTableDataSource(l.navDataSourceX(),{idAttribute:"id"}),l.mdScreen.subscribe(function(){e.OffcanvasUtils.close(l.drawerParams)}),l.drawerParams={displayMode:"push",selector:"#navDrawer",content:"#pageContent"},l.toggleDrawer=function(){return console.log("drawer toggle"),e.OffcanvasUtils.toggle(l.drawerParams)},$("#navDrawer").on("ojopen",function(){console.log("drawer open")}),$("#navDrawer").on("ojclose",function(){$("#drawerToggleButton").focus()}),l.title=o.pureComputed(function(){return l.router.currentState().label},this)}});